# Reusable template for Bun setup
parameters:
  - name: bunVersion
    type: string
    default: 'latest'

steps:
  - script: |
      export BUN_INSTALL="$HOME/.bun"
      export PATH="$BUN_INSTALL/bin:$PATH"
      if command -v bun &> /dev/null; then
        echo "Bun already installed: $(bun --version)"
      else
        echo "Installing Bun..."
        curl -fsSL https://bun.sh/install | bash
        bun --version
      fi
    displayName: 'Install Bun'

  - script: |
      export BUN_INSTALL="$HOME/.bun"
      export PATH="$BUN_INSTALL/bin:$PATH"
      bun install --frozen-lockfile
    displayName: 'Install dependencies'
